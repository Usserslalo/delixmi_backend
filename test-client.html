<!DOCTYPE html>
<html>

<head>
    <title>Socket.IO Test Client</title>
</head>

<body>
    <h1>Cliente de Prueba de Socket.IO</h1>
    <p>Abre la consola del navegador (presiona F12) para ver los mensajes.</p>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script>
        console.log("Intentando conectar a ws://localhost:3000...");
        const socket = io("ws://localhost:3000");

        socket.on("connect", () => {
            console.log("¡CONECTADO!", socket.id);
            document.body.style.backgroundColor = 'lightblue';

            // Unirse a la sala del cliente "Sofía" (userId: 10)
            socket.emit('join_user_room', { userId: 10 });
            // Unirse a la sala del restaurante "Sucursal Centro" (branchId: 4)
            socket.emit('join_branch_room', { branchId: 4 });
        });

        socket.on('joined_branch_room', (data) => console.log('Restaurante unido a la sala:', data));
        socket.on('joined_user_room', (data) => console.log('Cliente unido a la sala:', data));

        socket.on('new_order', (order) => {
            console.log('%c¡NUEVO PEDIDO PARA RESTAURANTE!', 'color: orange; font-weight: bold;', order);
        });

        socket.on('order_status_update', (data) => {
            console.log('%c¡ACTUALIZACIÓN DE ESTADO PARA CLIENTE!', 'color: green; font-weight: bold;', data);
        });
    </script>
</body>

</html>